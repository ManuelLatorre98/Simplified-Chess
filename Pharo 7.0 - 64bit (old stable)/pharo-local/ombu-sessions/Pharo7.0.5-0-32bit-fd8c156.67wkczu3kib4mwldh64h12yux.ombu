OmEntry {	#tags : {		#author : 'Manu',		#time : DateAndTime [ '2020-11-17T12:08:23.475201-03:00' ],		#prior : OmReference [ 'Pharo7.0.5-0-32bit-fd8c156.8vpok6bvpaw737ujqmrjks5ud', '33' ],		#self : OmReference [ '1' ]	},	#content : EpMethodModification {		#oldMethod : RGMethodDefinition {			#annotations : IdentityDictionary {				#isMetaSide : false,				#className : #Peon			},			#name : #'posiblesMov:',			#protocol : #'as yet unclassified',			#sourceCode : 'posiblesMov: unTablero\r|escaqueMov filaEscaqueMueveUnaPosi filaEscaqueMueveDosPosi haceMov comeFila comeColumnaIzq comeColumnaDer piezaAComer signo|\rhaceMov:= false.\rcolPosiblesMovimientos reset.\rsigno:=1.\r(color=(Color black))ifTrue: [ signo:=-1 ]."Para saber si se mueve para arriba o para abajo"\r\r\tfilaEscaqueMueveUnaPosi := filaPieza+signo.\r\tfilaEscaqueMueveDosPosi := filaPieza+(2*signo).\r\t(((filaPieza<8) & (signo=1))|((filaPieza>1)& (signo=(-1)))) ifTrue: [ haceMov:=true ]."Si llegue al final no puedo mover"\r\r\t\r\t(columnaPieza =1)ifTrue: [ "Si estoy en el borde no puedo comer para ese lado"\r\t\tcomeFila:= filaPieza +signo.\r\t\tcomeColumnaDer := columnaPieza +1.\r\t\tcomeColumnaIzq :=nil.\r\t\t ].\r\t(columnaPieza =8)ifTrue: [ \r\t\tcomeFila :=filaPieza+signo.\r\t\tcomeColumnaIzq:= columnaPieza -1.\r\t\tcomeColumnaDer :=nil.\r\t\t ].\r\t\r\t((columnaPieza>1) & (columnaPieza<8))ifTrue:[ "Lugares para donde puede comer"\r\tcomeFila:= filaPieza +signo.\r\tcomeColumnaIzq := columnaPieza-1.\r\tcomeColumnaDer:= columnaPieza +1.\r\t].\r\t(((filaPieza =8) &(signo=1)) | ((filaPieza=1) & (signo=(-1))))ifTrue: [ "si llego al final no puede comer"\r\t\tcomeColumnaDer:=nil.\r\t\tcomeColumnaIzq:=nil.\r\t\t ].\r\r(haceMov)ifTrue:[ "NO uso verificarEscaqueEnFila por que cuenta que puede comer para adelante"\r\t\t\tescaqueMov := unTablero escaqueAt: (filaEscaqueMueveUnaPosi) at: columnaPieza.\r\t\t\t(escaqueMov getPiezaEscaque)ifNil:["verifico que el posible nuevo escaque este vacio"\r\t\t\t\tcolPosiblesMovimientos add: escaqueMov. "A√±ade a mi coleccion el escaque una posicion por \t\t\t\tdelante de a donde esta ubicada la pieza"\r\t\t\t].\r\t((primerMovimiento) & (colPosiblesMovimientos isNotEmpty))ifTrue: [ "Si es el primer movimiento puede avanzar dos posiciones tambien. Verifico que la coleccion no este vacia ya que significa que no se pudo hacer un movimiento de un solo escaque porque hay una pieza contraria bloqueando"\r\t\t\tescaqueMov:= unTablero escaqueAt: (filaEscaqueMueveDosPosi ) at: columnaPieza.\r\t\t\t(escaqueMov getPiezaEscaque)ifNil: [ \r\t\t\t\tcolPosiblesMovimientos add: escaqueMov. "A√±ade a mi coleccion el escaque 2 posiciones por \t\t\t\tdelante a donde esta ubicada la pieza"\r\t\t\t\t\t\t\t\t\r\t\t\t\tprimerMovimiento := false."CORRECCION"\r\t\t\t].\r\t].\r\r].\t\r\t\r\t\r\t\t(comeColumnaDer )ifNotNil: [ "Verifico si puede comer escaque de la diagonal derecha"\r\t\t\t piezaAComer := ((unTablero escaqueAt: comeFila at: comeColumnaDer)getPiezaEscaque).\r\t\t\t (piezaAComer)ifNotNil: [ \r\t\t\t\t\tself verificarEscaqueEnFila: comeFila enColumna: comeColumnaDer enTablero: unTablero.\r\t\t\t ].\r\t\t].\r\t\r\t\t(comeColumnaIzq)ifNotNil: [ "verifico si puede comer escaque de la diagonal izquierda"\r\t\t\tpiezaAComer := ((unTablero escaqueAt: comeFila at: comeColumnaIzq)getPiezaEscaque).\r\t\t\t(piezaAComer)ifNotNil: [ \r\t\t\t\t\tself verificarEscaqueEnFila: comeFila enColumna: comeColumnaIzq enTablero: unTablero.\r\t\t\t ].\r\t\t].\r\r"primerMovimiento := false.Como si o si se va a realizar el movimiento lo seteo en false  MAL"\r^colPosiblesMovimientos.',			#stamp : 'Manu 11/11/2020 13:26',			#package : #'POO Tp obligatorio libre Ajedrez'		},		#newMethod : RGMethodDefinition {			#annotations : IdentityDictionary {				#isMetaSide : false,				#className : #Peon			},			#name : #'posiblesMov:',			#protocol : #'as yet unclassified',			#sourceCode : 'posiblesMov: unTablero\r|escaqueMov filaEscaqueMueveUnaPosi filaEscaqueMueveDosPosi haceMov comeFila comeColumnaIzq comeColumnaDer piezaAComer signo|\rhaceMov:= false.\rcolPosiblesMovimientos reset.\rsigno:=1.\r(color=(Color black))ifTrue: [ signo:=-1 ]."Para saber si se mueve para arriba o para abajo"\r\r\tfilaEscaqueMueveUnaPosi := filaPieza+signo.\r\tfilaEscaqueMueveDosPosi := filaPieza+(2*signo).\r\t(((filaPieza<8) & (signo=1))|((filaPieza>1)& (signo=(-1)))) ifTrue: [ haceMov:=true ]."Si llegue al final no puedo mover"\r\r\t\r\t(columnaPieza =1)ifTrue: [ "Si estoy en el borde no puedo comer para ese lado"\r\t\tcomeFila:= filaPieza +signo.\r\t\tcomeColumnaDer := columnaPieza +1.\r\t\tcomeColumnaIzq :=nil.\r\t\t ].\r\t(columnaPieza =8)ifTrue: [ \r\t\tcomeFila :=filaPieza+signo.\r\t\tcomeColumnaIzq:= columnaPieza -1.\r\t\tcomeColumnaDer :=nil.\r\t\t ].\r\t\r\t((columnaPieza>1) & (columnaPieza<8))ifTrue:[ "Lugares para donde puede comer"\r\tcomeFila:= filaPieza +signo.\r\tcomeColumnaIzq := columnaPieza-1.\r\tcomeColumnaDer:= columnaPieza +1.\r\t].\r\t(((filaPieza =8) &(signo=1)) | ((filaPieza=1) & (signo=(-1))))ifTrue: [ "si llego al final no puede comer"\r\t\tcomeColumnaDer:=nil.\r\t\tcomeColumnaIzq:=nil.\r\t\t ].\r\r(haceMov)ifTrue:[ "NO uso verificarEscaqueEnFila por que cuenta que puede comer para adelante"\r\t\t\tescaqueMov := unTablero escaqueAt: (filaEscaqueMueveUnaPosi) at: columnaPieza.\r\t\t\t(escaqueMov getPiezaEscaque)ifNil:["verifico que el posible nuevo escaque este vacio"\r\t\t\t\tcolPosiblesMovimientos add: escaqueMov. "A√±ade a mi coleccion el escaque una posicion por delante de a donde esta ubicada la pieza"\r\t\t\t].\r\t((primerMovimiento) & (colPosiblesMovimientos isNotEmpty))ifTrue: [ "Si es el primer movimiento puede avanzar dos posiciones tambien. Verifico que la coleccion no este vacia ya que significa que no se pudo hacer un movimiento de un solo escaque porque hay una pieza contraria bloqueando"\r\t\t\tescaqueMov:= unTablero escaqueAt: (filaEscaqueMueveDosPosi ) at: columnaPieza.\r\t\t\t(escaqueMov getPiezaEscaque)ifNil: [ \r\t\t\t\tcolPosiblesMovimientos add: escaqueMov. "A√±ade a mi coleccion el escaque 2 posiciones por \t\t\t\tdelante a donde esta ubicada la pieza"\r\t\t\t\t\t\t\t\t\r\t\t\t\tprimerMovimiento := false."CORRECCION"\r\t\t\t].\r\t].\r\r].\t\r\t\r\t\r\t\t(comeColumnaDer )ifNotNil: [ "Verifico si puede comer escaque de la diagonal derecha"\r\t\t\t piezaAComer := ((unTablero escaqueAt: comeFila at: comeColumnaDer)getPiezaEscaque).\r\t\t\t (piezaAComer)ifNotNil: [ \r\t\t\t\t\tself verificarEscaqueEnFila: comeFila enColumna: comeColumnaDer enTablero: unTablero.\r\t\t\t ].\r\t\t].\r\t\r\t\t(comeColumnaIzq)ifNotNil: [ "verifico si puede comer escaque de la diagonal izquierda"\r\t\t\tpiezaAComer := ((unTablero escaqueAt: comeFila at: comeColumnaIzq)getPiezaEscaque).\r\t\t\t(piezaAComer)ifNotNil: [ \r\t\t\t\t\tself verificarEscaqueEnFila: comeFila enColumna: comeColumnaIzq enTablero: unTablero.\r\t\t\t ].\r\t\t].\r\r"primerMovimiento := false.Como si o si se va a realizar el movimiento lo seteo en false  MAL"\r^colPosiblesMovimientos.',			#stamp : 'Manu 11/17/2020 12:08',			#package : #'POO Tp obligatorio libre Ajedrez'		}	}}